#!/bin/bash
# HireSync Development Environment Manager

# Set script directory
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Make sure all scripts are executable
chmod +x "$SCRIPT_DIR/scripts/"*.sh

# Main function to handle command dispatching
main() {
  # Process command
  case "$1" in
    start|"")
      # Run start script (which will show logs and can be stopped with Ctrl+C)
      "$SCRIPT_DIR/scripts/start.sh"
      ;;
    status)
      "$SCRIPT_DIR/scripts/status.sh"
      ;;
    app)
      "$SCRIPT_DIR/scripts/app.sh"
      ;;
    services)
      "$SCRIPT_DIR/scripts/services.sh"
      ;;
    stop)
      "$SCRIPT_DIR/scripts/stop.sh"
      ;;
    restart)
      "$SCRIPT_DIR/scripts/restart.sh"
      ;;
    clean)
      "$SCRIPT_DIR/scripts/clean.sh"
      ;;
    checkstyle)
      # Run checkstyle with remaining arguments
      "$SCRIPT_DIR/scripts/checkstyle.sh" "${@:2}"
      ;;
    quality)
      # Run all quality checks (shorthand for mvn verify)
      mvn -f "$SCRIPT_DIR/pom.xml" verify -Dcheckstyle.skip=false -Dpmd.skip=false -Dspotbugs.skip=false
      ;;
    help)
      "$SCRIPT_DIR/scripts/help.sh"
      ;;
    *)
      echo "Unknown command: $1"
      "$SCRIPT_DIR/scripts/help.sh"
      exit 1
      ;;
  esac
}

# Execute main function with arguments
main "$@" 
